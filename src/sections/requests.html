{% from "../components/list.html" import ol %}
{% from "../components/details.html" import details %}

{% macro gallery_image(url, preview_url, title, description) %}
<div class="requests-gallery__item">
  <div data-src="{{ url }}" class="requests-gallery__item-link">
    <img src="{{ preview_url }}" class="requests-gallery__item-link-image" />
  </div>
  {{ details(title, description) }}
</div>
{% endmacro %}


<section class="requests">
  <h2 class="qa__title">Запросы к серверу</h2>
  <div id="requests_gallery" class="requests-gallery">
    {{ gallery_image(
        "/img/requests/carousel/register.jpg",
        "/img/requests/preview/register.jpg",
        "Регистрация",
        ol([
          "Вы отправляете юзернейм нового пользователя и публичный ключ на сервер",
          "Сервер создает учетную запись"
        ])
      )
    }}

    {{ gallery_image(
        "/img/requests/carousel/login.jpg",
        "/img/requests/preview/login.jpg",
        "Логин",
        ol([
          "Во время авторизации ваш браузер делает запрос на вход.",
          "Сервер генерирует сообщение (случайную одноразовую строку).",
          "Браузер с помощью вашего приватного ключа подписывает сообщение и отправляет на сервер.",
          "Сервер проверяет подлинность подписи с помощью публичного ключа и в ответ возвращает токен. Этот токен будет использоваться для подтверждения владения учетной записью при последующих запросах"
        ])
      )
    }}

    {{ gallery_image(
        "/img/requests/carousel/other.jpg",
        "/img/requests/preview/other.jpg",
        "Прочие запросы",
        ol([
          "Если в запросе есть секретные данные, то перед отправкой на сервер они локально шифруются",
          "На серверной части производятся действия над базой данных (запись, получение, изменение, удаления данных)",
          "Если в ответе от сервера есть зашифрованные данные, то они также локально дешифруются"
        ])
      )
    }}

  </div>
</section>